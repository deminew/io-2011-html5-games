<!DOCTYPE html>

<!--
  Google I/O 2011 HTML slides template
  
  Created by Luke Mahé (lukem@google.com) 
         and Marcin Wichary (mwichary@google.com).
   
  URL: http://go/io-html-slides
-->

<html>
  <head>
    <meta charset='utf-8' />
    
    <title>Google I/O 2011 - Super Browser 2 Turbo HD Remix : Intro to HTML5 Game Development by Seth Ladd</title>
    <script
      src='slides.js'></script>
  </head>
  
  <style>
    /* Your individual styles here, or just use inline styles if that’s
       what you want. */
    
    pre > .important {
        background-color: yellow;
    }
  </style>

  <body style='display: none'>

    <section class='slides'>
      
      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->
        
        
      
      <article class='biglogo'>
      </article>

      <article>
        <h1>
          Super Browser 2 Turbo HD Remix:
          <br>
          Intro to HTML5 Game Development
        </h1>
        <p>
          Seth Ladd
          <br>
          May 10, 2011
        </p>
      </article>
      
      <article>
        <h3>
          Hi, I'm Seth.
        </h3>
        <p>
            I'll be your Developer Advocate this morning.
        </p>
        <p>
            Chrome + Games FTW
        </p>
        <p>
            Chat me up: <a href="http://twitter.com/sethladd">@sethladd</a> or <a href="http://blog.sethladd.com">blog.sethladd.com</a>
        </p>
      </article>
      
      <article>
          <h3>
            What are we up to?
          </h3>
          <ul>
            <li>
              Learn how to write an HTML5 game.
            </li>
            <li>
              Add game development to your toolkit.
            </li>
            <li>
              Create engaged and happy users.
            </li>
            <li>
                Blow up aliens.
            </li>
          </ul>
      </article>
        
      <article>
            <h3>
              No skills, No problem
            </h3>
            <ul>
              <li>
                101 talk
              </li>
              <li>
                Web developers new to game dev
              </li>
              <li>
                  From zero to hero!
              </li>
            </ul>
        </article>
          
        <article>
            <h2>
              1993, D&amp;D, Mountain Dew
            </h2>
        </article>
        
        <article>
          <p>
            <img class='centered' style='height: 368px' width='603' height='368' src='images/Doom.png'>
          </p>
        </article>
        
        <article>
          <h3>
            Takeaways
          </h3>
          <ul>
            <li>
              Digital distribution is obviously a killer feature
            </li>
            <li>
              Gamers spend money
            </li>
            <li>
              Gamers upgrade systems
            </li>
            <li>
              Games create an emotional response
            </li>
          </ul>
        </article>
        
        <article>
            <h2>
              Let's build a game!
            </h2>
        </article>
        
        <article>
          <h3>
            HTML5 + JavaScript
          </h3>
          <p>
            <img class='centered' style='height: 512px' height='512' width='512' src='images/html5-logo.png'>
          </p>
        </article>
        
        <article>
          <h3>
            Evil Aliens 2
          </h3>
          <ul>
            <li>
              Start from scratch
            </li>
            <li>
                Build as we go
            </li>
            <li>
                Play! <a href="http://evil-aliens-2.appspot.com">evil-aliens-2.appspot.com</a>
            </li>
          </ul>
        </article>
        
        <article>
          <h3>
            Break it down
          </h3>
          <ol>
            <li>
                Setup space: Canvas
            </li>
            <li>
                Drawing the planet: Asset management, Drawing images, Translating coordinates
            </li>
            <li>
                Aliens and movement: Game world, entities, and loop
            </li>
            <li>
                Correct timing: In-game clocks
            </li>
            <li>
                Aliens facing earth: Image rotation
            </li>
            <li>
                Reducing work: Off-screen canvas
            </li>
            <li>
                Turret and mouse tracking: Input handling
            </li>
        </article>
        
        <article>
            <h3>Break it down (cont.)</h3>
            <ol start="8">
                <li>
                    Shooting: Input handling, removing entities
                </li>
                <li>
                    Lasers explode: Animations, sprite sheets, image scaling
                </li>
                <li>
                    Ka-Boom!: Sounds
                </li>
                <li>
                    Blow up Aliens: Collision detection
                </li>
                <li>
                    Score keeping: Drawing text
                </li>
                <li>
                    Monitoring performance: Stats and framerates
                </li>
                <li>
                    Offline: Application cache
                </li>
            </ol>
        </article>
        
        <article>
          <h3>
            Phase 1 Objectives
          </h3>
          <ul>
              <li>
                Bootstrap
              </li>
            <li>
                Create a space to draw on
            </li>
            <li>
                Emulate the void of space
            </li>
          </ul>
        </article>
        
        <article>
            <h3>
                Phase 1 Technologies
            </h3>
          <ul>
            <li>
                HTML5 Canvas
            </li>
            <li>
                2D surface
            </li>
            <li>
                Immediate mode
            </li>
            <li>
                Primitives like lines, images, arcs
            </li>
            <li>
                Transformations, scaling
            </li>
            <li>
                Hardware accelerated
            </li>
            <li>
                Other options?
            </li>
        </article>
        
        <article>
          <h3>
            Phase 1 Code: Canvas
          </h3>
          <section>
              <pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;title&gt;Evil Aliens 2&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;canvas id=&quot;surface&quot; width=&quot;1024&quot; height=&quot;768&quot;&gt;&lt;/canvas&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
        </section>
        </article>
        
        <article class='fill'>
            <h3>Phase 1: Launch It</h3>
            <p>
                <a href="http://evil-aliens-2.appspot.com/phase01/index.html" target="_new">http://evil-aliens-2.appspot.com/phase01/index.html</a>
            </p>
            <ul>
                <li>
                    Bootstrap HTML
                </li>
                <li>
                    Empty, black canvas
                </li>
            </ul>
        </article>
        
        <article>
          <h3>
            Phase 2 Objectives
          </h3>
          <ul>
              <li>
                Draw images to the canvas
              </li>
              <li>
                Load all images before game starts
              </li>
              <li>
                Draw planet in center of canvas
              </li>
              <li>
                Wait for asynchronous loading
              </li>
        </article>
        
        <article>
            <h3>Phase 2 Technologies</h3>
            <ul>
                <li>
                    Asset Manager
                </li>
                <li>
                    Canvas <code>drawImage(img,x,y)</code>
                </li>
                <li>
                    Canvas <code>translate(x,y)</code>
                </li>
            </ul>
        </article>
        
        <article>
            <h3>
                Phase 2 Code: Asset Manager
          </h3>
          <section>
              <pre>
function AssetManager() {
  this.successCount = 0;
  this.errorCount = 0;
  this.cache = {};
  this.downloadQueue = [];
}

AssetManager.prototype.queueDownload = function(path) {
  this.downloadQueue.push(path);
}

AssetManager.prototype.isDone = function() {
  return (this.downloadQueue.length == this.successCount + this.errorCount);
}</pre>
            </section>
        </article>
        
        <article class='smaller'>
            <h3>
                Phase 2 Code: Asset Manager (cont.)
          </h3>
          <section>
              <pre>
AssetManager.prototype.downloadAll = function(callback) {
  for (var i = 0; i &lt; this.downloadQueue.length; i++) {
      var path = this.downloadQueue[i];
      var img = new Image();
      var that = this;
      img.addEventListener(&quot;load&quot;, function() {
          console.log(this.src + ' is loaded');
          that.successCount += 1;
          if (that.isDone()) {
              callback();
          }
      });
      img.addEventListener(&quot;error&quot;, function() {
          that.errorCount += 1;
          if (that.isDone()) {
              callback();
          }
      });
      img.src = path;
      this.cache[path] = img;
  }
}</pre>
            </section>
        </article>

        <article>
            <h3>
                Phase 2 Code: Drawing images, translating coordinates
            </h3>
          <section>
              <pre>
ASSET_MANAGER.queueDownload('img/earth.png');

ASSET_MANAGER.downloadAll(function() {
  var x = 0, y = 0;
  var sprite = ASSET_MANAGER.getAsset('img/earth.png');
  
  ctx.save(); // push ctx state
  
  // move coordinate system to center of canvas
  ctx.translate(canvas.width/2, canvas.height/2);
  // draw image centered
  ctx.drawImage(sprite, x - sprite.width/2, y - sprite.height/2);
  
  ctx.restore(); // pop ctx state
});</pre>
            </section>
        </article>
        
        <article>
          <h3>
            <a href="https://developer.mozilla.org/en/Canvas_tutorial/Transformations">Canvas Translation</a>
          </h3>
          <p>
            <img class='centered' style='height: 500px' height='500' width='500' src='images/Canvas_grid_translate.png'>
          </p>
        </article>
        
        <article>
            <h3>
                Phase 2: Launch it!
            </h3>
            <p>
                <a href="http://evil-aliens-2.appspot.com/phase02/index.html" target="_new">http://evil-aliens-2.appspot.com/phase02/index.html</a>
            </p>
            <ul>
                <li>
                    Waits for image to download
                </li>
                <li>
                    Draws image in center of canvas
                </li>
            </ul>
        </article>
        
        <article>
          <h3>
            Phase 3 Objectives
          </h3>
          <ul>
              <li>
                Draw and fly aliens
              </li>
              <li>
                Manage things in the game
              </li>
              <li>
                Create a game loop
              </li>
        </article>
        
        <article>
            <h3>Phase 3 Technologies</h3>
            <ul>
                <li>
                    Game engine and Entities
                </li>
                <li>
                    Loop <code>update()</code> and <code>draw()</code>
                </li>
                <li>
                    Avoid <code>setInterval()</code> and <code>setTimeout()</code>
                </li>
                <li>
                    Use <code>requestAnimationFrame(callback,element)</code>
                </li>
            </ul>
        </article>
        
        <article class='smaller'>
            <h3>
                Phase 3 Code: Game engine
            </h3>
          <section>
              <pre>
function GameEngine() {
  this.entities = [];
  this.ctx = null;
  this.lastUpdateTimestamp = null;
  this.deltaTime = null;
}

GameEngine.prototype.draw = function(callback) {
  // loop through all entities, call draw()
}

GameEngine.prototype.update = function() {
  // loop through all entities, call update()
}

GameEngine.prototype.loop = function() {
  var now = Date.now();
  this.deltaTime = now - this.lastUpdateTimestamp;
  <span class="important">this.update();</span>
  <span class="important">this.draw();</span>
  this.lastUpdateTimestamp = now;
}
</pre>
            </section>
        </article>
        
        <article>
            <h3>
                Phase 3 Code: Game engine start
            </h3>
          <section>
              <pre>
GameEngine.prototype.start = function() {
  console.log(&quot;starting game&quot;);
  this.lastUpdateTimestamp = Date.now();
  var that = this;
  (function gameLoop() {
      that.loop();
      requestAnimFrame(gameLoop, that.ctx.canvas);
  })();
}
</pre>
            </section>
        </article>
        
        <article class='smaller'>
            <h3>
                Phase 3 Code: <code>requestAnimationFrame()</code>
            </h3>
          <section>
              <pre>
window.requestAnimFrame = (function(){
    return  window.requestAnimationFrame       ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame    ||
            window.oRequestAnimationFrame      ||
            window.msRequestAnimationFrame     ||
            function(/* function */ callback, /* DOMElement */ element){
              window.setTimeout(callback, 1000 / 60);
            };
})();
</pre>
            </section>
            <p>
                Learn more: <a href="http://paulirish.com/2011/requestanimationframe-for-smart-animating/">requestAnimationFrame for Smart Animating</a>
            </p>
        </article>
        
        <article class='smaller'>
            <h3>
                Phase 3 Code: Alien
            </h3>
          <section>
              <pre>
function Alien(game, radial_distance, angle) {
  Entity.call(this, game);
  // set properties
}
Alien.prototype = new Entity();
Alien.prototype.constructor = Alien;

Alien.prototype.update = function() {
  this.x = this.radial_distance * Math.cos(this.angle);
  this.y = this.radial_distance * Math.sin(this.angle);
  <span class="important">this.radial_distance -= this.speed * this.game.deltaTime;</span>

  Entity.prototype.update.call(this);
}

Alien.prototype.draw = function(ctx) {
  this.drawSpriteCentered(ctx);
  Entity.prototype.draw.call(this, ctx);
}
</pre>
            </section>
        </article>
        
        <article>
            <h3>
                Phase 3 Code: Draw images centered
            </h3>
          <section>
              <pre>
Entity.prototype.drawSpriteCentered = function(ctx) {
  var x = this.x - this.sprite.width/2;
  var y = this.y - this.sprite.height/2;
  ctx.drawImage(this.sprite, x, y);
}
</pre>
            </section>
        </article>
        
        <article>
            <h3>
                Phase 3: Launch it!
            </h3>
            <p>
                <a href="http://evil-aliens-2.appspot.com/phase03/index.html" target="_new">http://evil-aliens-2.appspot.com/phase03/index.html</a>
            </p>
            <ul>
                <li>
                    Game engine, entities
                </li>
                <li>
                    Loop and <code>requestAnimationFrame()</code>
                </li>
                <li>
                    Aliens moving
                </li>
                <li>
                    SPOT THE BUG?
                </li>
            </ul>
        </article>
        
        <article>
          <h3>
            Phase 4 Objectives
          </h3>
          <ul>
              <li>
                Fix the &quot;wormhole&quot; bug
              </li>
          </ul>
        </article>
        
        <article>
          <h3>
            Phase 4 Technologies
          </h3>
          <ul>
              <li>
                In-game timer
              </li>
              <li>
                Ignore wall clock
              </li>
              <li>
                Clamp time deltas
              </li>
          </ul>
        </article>
        
        <article>
            <h3>
                Phase 4 Code: Timer
            </h3>
          <section>
              <pre>
function Timer() {
  this.gameTime = 0;
  this.maxStep = 0.05;
  this.wallLastTimestamp = 0;
}

Timer.prototype.tick = function() {
  var wallCurrent = Date.now();
  var wallDelta = (wallCurrent - this.wallLastTimestamp) / 1000;
  this.wallLastTimestamp = wallCurrent;

  <span class="important">var gameDelta = Math.min(wallDelta, this.maxStep);</span>
  this.gameTime += gameDelta;
  return gameDelta;
}
</pre>
            </section>
        </article>
        
        <article>
            <h3>
                Phase 4 Code: Game loop using timer
            </h3>
          <section>
              <pre>
GameEngine.prototype.loop = function() {
  <span class="important">this.clockTick = this.timer.tick();</span>
  this.update();
  this.draw();
}
</pre>
            </section>
        </article>
        
        <article>
            <h3>
                Phase 4 Code: Alien velocity using ticks
            </h3>
          <section>
              <pre>
Alien.prototype.update = function() {
  this.x = this.radial_distance * Math.cos(this.angle);
  this.y = this.radial_distance * Math.sin(this.angle);
  <span class="important">this.radial_distance -= this.speed * this.game.clockTick;</span>

  Entity.prototype.update.call(this);
}
</pre>
            </section>
        </article>
        
        <article>
            <h3>
                Phase 4: Launch it!
            </h3>
            <p>
                <a href="http://evil-aliens-2.appspot.com/phase04/index.html" target="_new">http://evil-aliens-2.appspot.com/phase04/index.html</a>
            </p>
            <ul>
                <li>
                    No wormholes
                </li>
                <li>
                    Timing now prepped for multi-player
                </li>
                <li>
                    Repeatable, consistent
                </li>
            </ul>
        </article>
      
      <article>
        <p>
          This is a slide with just text. This is a slide with just text.
          This is a slide with just text. This is a slide with just text.
          This is a slide with just text. This is a slide with just text.
        </p>
        <p>
          There is more text just underneath.
        </p>
      </article>

      <article>
        <h3>
          Simple slide with header and text
        </h3>
        <p>
          This is a slide with just text. This is a slide with just text.
          This is a slide with just text. This is a slide with just text.
          This is a slide with just text. This is a slide with just text.
        </p>
        <p>
          There is more text just underneath with a <code>code sample: 5px</code>.
        </p>
      </article>

      <article class='smaller'>
        <h3>
          Simple slide with header and text (small font)
        </h3>
        <p>
          This is a slide with just text. This is a slide with just text.
          This is a slide with just text. This is a slide with just text.
          This is a slide with just text. This is a slide with just text.
        </p>
        <p>
          There is more text just underneath with a <code>code sample: 5px</code>.
        </p>
      </article>

      <article>
        <h3>
          Slide with bullet points and a longer title, just because we
          can make it longer
        </h3>
        <ul>
          <li>
            Use this template to create your presentation
          </li>
          <li>
            Use the provided color palette, box and arrow graphics, and
            chart styles
          </li>
          <li>
            Instructions are provided to assist you in using this
            presentation template effectively
          </li>
          <li>
            At all times strive to maintain Google's corporate look and feel
          </li>
        </ul>
      </article>

      <article>
        <h3>
          Slide with bullet points that builds
        </h3>
        <ul class="build">
          <li>
            This is an example of a list
          </li>
          <li>
            The list items fade in
          </li>
          <li>
            Last one!
          </li>
        </ul>

        <div class="build">
          <p>Any element with child nodes can build.</p>
          <p>It doesn't have to be a list.</p>
        </div>
      </article>

      <article class='smaller'>
        <h3>
          Slide with bullet points (small font)
        </h3>
        <ul>
          <li>
            Use this template to create your presentation
          <li>
            Use the provided color palette, box and arrow graphics, and
            chart styles
          <li>
            Instructions are provided to assist you in using this
            presentation template effectively
          <li>
            At all times strive to maintain Google's corporate look and feel
        </ul>
      </article>

      <article>
        <h3>
          Slide with a table
        </h3>
        
        <table>
          <tr>
            <th>
              Name
            <th>
              Occupation
          <tr>
            <td>
              Luke Mahé
            <td>
              V.P. of Keepin’ It Real
          <tr>
            <td>
              Marcin Wichary
            <td>
              The Michael Bay of Doodles
        </table>
      </article>
      
      <article class='smaller'>
        <h3>
          Slide with a table (smaller text)
        </h3>
        
        <table>
          <tr>
            <th>
              Name
            <th>
              Occupation
          <tr>
            <td>
              Luke Mahé
            <td>
              V.P. of Keepin’ It Real
          <tr>
            <td>
              Marcin Wichary
            <td>
              The Michael Bay of Doodles
        </table>
      </article>
      
      <article>
        <h3>
          Styles
        </h3>
        <ul>
          <li>
            <span class='red'>class="red"</span>
          <li>
            <span class='blue'>class="blue"</span>
          <li>
            <span class='green'>class="green"</span>
          <li>
            <span class='yellow'>class="yellow"</span>
          <li>
            <span class='black'>class="black"</span>
          <li>
            <span class='white'>class="white"</span>
          <li>
            <b>bold</b> and <i>italic</i>
        </ul>
      </article>
      
      <article>
        <h2>
          Segue slide
        </h2>
      </article>

      <article>
        <h3>
          Slide with an image
        </h3>
        <p>
          <img style='height: 500px' src='images/example-graph.png'>
        </p>
      </article>

      <article>
        <h3>
          Slide with an image (centered)
        </h3>
        <p>
          <img class='centered' style='height: 500px' src='images/example-graph.png'>
        </p>
      </article>

      <article class='fill'>
        <h3>
          Image filling the slide (with optional header)
        </h3>
        <p>
          <img src='images/example-cat.jpg'>
        </p>
      </article>

      <article>
        <h3>
          This slide has some code
        </h3>
        <section>
        <pre>
&lt;script type='text/javascript'&gt;
  // Say hello world until the user starts questioning
  // the meaningfulness of their existence.
  function helloWorld(world) {
    for (var i = 42; --i &gt;= 0;) {
      alert('Hello ' + String(world));
    }
  }
&lt;/script&gt;
&lt;style&gt;
  p { color: pink }
  b { color: blue }
  u { color: 'umber' }
&lt;/style&gt;
</pre>
        </section>
      </article>
      
      <article class='smaller'>
        <h3>
          This slide has some code (small font)
        </h3>
        <section>
        <pre>
&lt;script type='text/javascript'&gt;
  // Say hello world until the user starts questioning
  // the meaningfulness of their existence.
  function helloWorld(world) {
    for (var i = 42; --i &gt;= 0;) {
      alert('Hello ' + String(world));
    }
  }
&lt;/script&gt;
&lt;style&gt;
  p { color: pink }
  b { color: blue }
  u { color: 'umber' }
&lt;/style&gt;
</pre>
        </section>
      </article>
      
      <article class='nobackground'>
        <h3>
          A slide with an embed + title
        </h3>
        
        <iframe src='http://www.google.com/doodle4google/history.html'></iframe>
      </article>

      <article class='nobackground'>
        <iframe src='http://www.google.com/doodle4google/history.html'></iframe>
      </article>

      <article class='fill'>
        <h3>
          Full-slide embed with (optional) slide title on top
        </h3>
        <iframe src='http://www.google.com/doodle4google/history.html'></iframe>
      </article>
      
      <article>
        <h3>
          Thank you!
        </h3>
        
        <ul>
          <li>
            <a href='http://www.google.com'>google.com</a>
        </ul>
      </article>

    </section>

  </body>
</html>
